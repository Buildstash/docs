---
title: "Verify Upload"
description: "Verify that all parts of an upload have been successfully uploaded and complete the upload process"
method: "POST"
endpoint: "/upload/verify"
---

<Note>
  This endpoint completes the upload process by verifying all uploaded parts and creating the final build record.
</Note>

## Overview

The upload verification endpoint is the final step in the upload process. It verifies that all parts have been successfully uploaded and creates the final build record in Buildstash.

## Request Body

<ParamField body="pending_upload_id" type="string" required>
  The pending upload ID from the initial `/upload/request` call
</ParamField>

<ParamField body="multipart_chunks" type="array">
  Array of uploaded parts. Required for multipart uploads.
  
  <Expandable title="Multipart Chunk Object">
    <ParamField body="PartNumber" type="integer" required>
      The part number (1-based)
    </ParamField>
    <ParamField body="ETag" type="string" required>
      The ETag returned from the upload of this part
    </ParamField>
  </Expandable>
</ParamField>

## Response

<ResponseExample>
  <ResponseExampleBody>
```json
{
  "build_id": "build_123456789",
  "pending_processing": true,
  "build_info_url": "https://app.buildstash.com/builds/build_123456789",
  "download_url": "https://app.buildstash.com/downloads/build_123456789"
}
```
  </ResponseExampleBody>
</ResponseExample>

## Single Part Upload Verification

For single part uploads, simply provide the `pending_upload_id`:

<CodeGroup>

```bash Single Part Verification
curl -X POST https://app.buildstash.com/api/v1/upload/verify \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "pending_upload_id": "upload_123456789"
  }'
```

</CodeGroup>

## Multipart Upload Verification

For multipart uploads, include the `multipart_chunks` array with all uploaded parts:

<CodeGroup>

```bash Multipart Verification
curl -X POST https://app.buildstash.com/api/v1/upload/verify \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "pending_upload_id": "upload_123456789",
    "multipart_chunks": [
      {
        "PartNumber": 1,
        "ETag": "\"abc123def456\""
      },
      {
        "PartNumber": 2,
        "ETag": "\"ghi789jkl012\""
      },
      {
        "PartNumber": 3,
        "ETag": "\"mno345pqr678\""
      }
    ]
  }'
```

</CodeGroup>

## Response Fields

<ResponseField name="build_id" type="string">
  Unique identifier for the completed build
</ResponseField>

<ResponseField name="pending_processing" type="boolean">
  Whether the build is still being processed by Buildstash
</ResponseField>

<ResponseField name="build_info_url" type="string">
  URL to view detailed build information
</ResponseField>

<ResponseField name="download_url" type="string">
  URL to download the uploaded file
</ResponseField>

## Error Handling

- **400 Bad Request**: Invalid pending upload ID or missing parts
- **401 Unauthorized**: Invalid or missing API key
- **404 Not Found**: Pending upload not found
- **409 Conflict**: Upload already completed or parts mismatch

## Important Notes

- The verification step is required for both single part and multipart uploads
- For multipart uploads, all parts must be included in the `multipart_chunks` array
- ETags must match exactly what was returned from the upload requests
- Once verified, the upload cannot be modified
- The build may take some time to process, indicated by `pending_processing: true` 