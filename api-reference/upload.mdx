---
title: "Uploading a Build"
description: "Upload a new build to Buildstash"
---

This guide covers uploading via single or multipart upload flows. Multipart is required for build files above 5GB, and optional for files smaller than this.

### Authentication

Note, a Buildstash app-level API key is required for uploading builds.

#### Request to start

<Steps>
  <Step title="Request to start upload" icon="chevron-right" stepNumber={1}>
    Use [/upload/request](/api-reference/endpoint/upload/request) endpoint to pass in all key build information, request to begin the upload process, and receive a presigned URL for uploading the build file to.

    <Card title="/upload/request" icon="terminal" horizontal href="/api-reference/endpoint/upload/request">
      
    </Card>
  </Step>
</Steps>

#### Upload - Single part

<Steps>
  <Step title="Upload file to presigned URL" icon="chevron-right" stepNumber={2}>
    Upload the file

    <CodeGroup dropdown>

    ```curl Request
    curl -X PUT "https://example-presigned-url.com" \
    --upload-file "path/to/your/file.txt" \
    -H "Content-Type: content-type-from-upload-request" \
    -H "Content-Length: returned-content-length" \
    -H "Content-Disposition: returned-content-disposition" \
    -H "x-amz-acl: private"
    
    ```

    
    ```javascript Request
    // uploadRequest made as in above step
    const { pending_upload_id, primary_file, expansion_files } = uploadRequest.data;
    
    await axios.put(
      primary_file.presigned_data.url,
      fs.createReadStream(primaryFilePath),
      {
        headers: {
          'Content-Type': primary_file.presigned_data.headers['Content-Type'],
          'Content-Length': primary_file.presigned_data.headers['Content-Length'],
          'Content-Disposition': primary_file.presigned_data.headers['Content-Disposition'],
          'x-amz-acl': 'private'
        },
        maxBodyLength: Infinity
      }
    );
    ```

    ```python Request
    //
    ```
    
    ```php Request
    //
    ```

    ```go Request
    //
    ```

    ```java Request
    //
    ```

    ```csharp Request
    //
    ```

    ```ruby Request
    //
    ```
    

    </CodeGroup>

    If the upload to S3 was successful, you've receive a response like:

    <CodeGroup>

    ```filename Response
    // add code here
    ```

    </CodeGroup>
  </Step>
</Steps>

#### Upload - Multipart

<Steps>
  <Step title="Request to start upload" icon="chevron-right" stepNumber={1}>
    Use [/upload/request/multipart](/api-reference/endpoint/upload/request/multipart) endpoint to request the presigned URL for each part.

    <Card title="/upload/request/multipart" icon="terminal" horizontal href="/api-reference/endpoint/upload/request/multipart">
      
    </Card>
  </Step>
  <Step title="Upload part" icon="chevron-right">
    asdf
  </Step>
</Steps>

#### Verify and complete

<Steps>
  <Step title="Verify and complete upload" icon="chevron-right" stepNumber={4}>
    Use [/upload/verify](/api-reference/endpoint/upload/verify) endpoint to inform Buildstash the upload is complete, validate all parts have successfully uploaded, and complete the upload flow.

    <Card title="/upload/verify" icon="terminal" horizontal href="/upload/verify">
      
    </Card>
  </Step>
</Steps>

### Best Practices

1. **Retry Logic**: Implement retry logic for failed uploads
2. **Progress Tracking**: Track upload progress for large files
3. **Parallel Uploads**: Upload parts in parallel for better performance
4. **Validation**: Verify file integrity after upload
5. **Cleanup**: Handle cleanup on upload failure

### Provided Integrations

<Card title="CI Integrations" href="https://support.buildstash.com/docs">
  We provide a number of off-the-shelf integrations for uploading builds to Buildstash via widely used CI platforms - like GitHub Actions and Azure Pipelines.
</Card>